# MQTT
<!-- ## История
## Основни характеристики
## Приложение -->
Ще изполваме базов IoT безжичен модул ESP8266 за няколко практически примера за приложението на MQTT.
Модулът ще програмираме с Arduino IDE. За телеметрия ще използваме MQTT брокер предоставен от [flespi](https://flespi.com/mqtt-broker).


## Нужни
- **Espressif ESP8266** (Всяка развойна платка ориентирана около този чип върши работа.)
- **USB кабел тип Micro-B** (Някои кабели са предназначени само за захранване. Трябва ни такъв с линия за данни и захранване.)
- **Регистрация във [flespi](https://flespi.com/mqtt-broker)** (Безплатната версия е повече от достатъчна.)
- **Arduino IDE с tool chain-а за ESP8266** (_**TODO** линк към пояснение как да бъде инсталиран tool chain-а_)
- **Arduino Client for MQTT - PubSubClient by knolleary** (Библиотека за Arduino IDE) (_**TODO** линк към пояснение как да бъде исталирана_)


## Регистрация и тестване на връзката
Тъй като автентификацията на устроиствата свързващи се към MQTT брокера е задължителна, преди да преминем към писането на код трябва да създадем токен. Този токен се състои от 64 символа и платформата го генерира автоматично. В най-простия слиучай се задава като име на устройството в неговия код (ще го разгледаме подробно в примера).

### Генериране на токен
След като сте влезли в акаунта си, отидете в меню **Tokens<sub>Access control</sub>** и щракнете върху бутона **Add new token** (зеления +). Резултатът е контекстно меню с няколко полета, като за всяка има пояснение отстрани. Начина по който процедирам аз е да въведа ключова дума в полето **Info**, нещо което ми напомня за какво използвам този токен и на кое у-во, също така попълвам полето **Expire**, обикновено задавам 1 година от момента на създаване.